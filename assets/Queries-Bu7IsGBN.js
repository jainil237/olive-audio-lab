import{c as p,u as q,r,j as e,S as E,X as P,A as x,G as v,L as Q}from"./index-Cc9ETlLz.js";import{T as M}from"./trash-2-B7Vf6_PR.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_=p("arrow-right",I);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],L=p("pencil",B);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],$=p("shield-alert",U),u={name:"",email:"",projectType:"",budget:"",message:""},R=()=>{const{addQuery:y,updateQuery:N,deleteQuery:f,queries:h,currentUser:b,isAdmin:c}=q(),[l,n]=r.useState(u),[s,d]=r.useState(null),[a,g]=r.useState(!1),[w,o]=r.useState(!1),j=t=>{const{name:i,value:D}=t.target;n(T=>({...T,[i]:D}))},z=t=>{d(t.id),n({name:t.name,email:t.email,projectType:t.projectType||"",budget:t.budget||"",message:t.message||""}),window.scrollTo({top:0,behavior:"smooth"})},m=()=>{d(null),n(u)},k=async t=>{window.confirm("Are you sure you want to delete this query?")&&(await f(t),s===t&&m())},S=async t=>{t.preventDefault(),g(!0),o(!1);try{s?await N(s,{...l,updatedAt:new Date}):await y(l),o(!0),n(u),d(null),setTimeout(()=>o(!1),5e3)}catch{alert("Failed to save. Please try again.")}finally{g(!1)}},A=r.useMemo(()=>["Share your references and timeline.","Receive a curated production plan.","Approve proposal and secure slot."],[]),C=t=>t?(t.toDate?t.toDate():new Date(t)).toLocaleDateString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return e.jsxs("div",{className:"grid gap-10 lg:grid-cols-2 text-white",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{align:"left",eyebrow:s?"Edit Mode":"Project brief",children:s?"Update your query":"Tell us about your sound"}),e.jsx("p",{className:"text-zinc-400",children:"Share project details so we can prepare timelines, budget and deliverables. Our team responds within 24 hours."}),e.jsxs("form",{onSubmit:S,className:`relative space-y-4 overflow-hidden rounded-[2.5rem] border ${s?"border-lime-500/30":"border-white/5"} bg-black/60 p-6 md:p-8 transition-colors duration-300`,children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-br from-lime-500/10 via-transparent to-emerald-500/10 opacity-70"}),e.jsx("div",{className:"pointer-events-none absolute -top-20 -right-16 h-48 w-48 rounded-full bg-lime-400/20 blur-3xl"}),e.jsxs("div",{className:"relative space-y-4",children:[s&&e.jsxs("div",{className:"flex items-center justify-between bg-lime-500/10 px-4 py-2 rounded-xl border border-lime-500/20 text-lime-300 text-sm mb-4",children:[e.jsx("span",{children:"Editing previous submission"}),e.jsxs("button",{type:"button",onClick:m,className:"hover:text-white flex items-center gap-1",children:[e.jsx(P,{size:14})," Cancel"]})]}),[{label:"Name",name:"name",type:"text",placeholder:"Your full name",required:!0},{label:"Email",name:"email",type:"email",placeholder:"you@example.com",required:!0},{label:"Project type",name:"projectType",type:"text",placeholder:"Production, mixing, masteringâ€¦"},{label:"Budget range",name:"budget",type:"text",placeholder:"$500 - $3,000"}].map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-zinc-400",children:t.label}),e.jsx("input",{type:t.type,name:t.name,placeholder:t.placeholder,value:l[t.name],onChange:j,required:t.required,disabled:a,className:"w-full rounded-2xl border border-white/10 bg-black/40 px-4 py-3 text-sm focus:border-lime-400 focus:outline-none disabled:opacity-50 text-white"})]},t.name)),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-zinc-400",children:"Project brief"}),e.jsx("textarea",{name:"message",value:l.message,onChange:j,disabled:a,rows:5,className:"w-full rounded-2xl border border-white/10 bg-black/40 px-4 py-3 text-sm focus:border-lime-400 focus:outline-none disabled:opacity-50 text-white"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(x,{type:"submit",variant:"primary",className:"flex-1 md:w-auto",disabled:a,children:a?"Saving...":s?"Update Query":"Submit Query"}),s&&e.jsx(x,{type:"button",variant:"ghost",onClick:m,disabled:a,children:"Cancel"})]}),w&&e.jsx("div",{className:"rounded-2xl border border-lime-500/40 bg-lime-500/10 px-4 py-2 text-sm text-lime-200 animate-in fade-in slide-in-from-top-2",children:s?"Query updated successfully.":"Thanks! We've received your brief."})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{className:"bg-black/50 space-y-4",children:[e.jsx("h3",{className:"text-2xl font-semibold",children:"Booking process"}),e.jsx("div",{className:"space-y-4",children:A.map((t,i)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-lime-300/80",children:["Step ",i+1]}),e.jsx("p",{className:"text-sm text-zinc-300",children:t})]},t))})]}),c&&e.jsx("div",{className:"space-y-4 pt-6 border-t border-white/10",children:e.jsxs("div",{className:"p-6 rounded-2xl bg-lime-900/10 border border-lime-500/20 text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-lime-500/20 flex items-center justify-center mx-auto text-lime-400",children:e.jsx($,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white",children:"Admin Access"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"You are signed in as an administrator. Use the dashboard to view all received inquiries."})]}),e.jsx(Q,{to:"/queries-listing",children:e.jsxs(x,{variant:"outline",className:"w-full mt-2 group",children:["View All Inquiries ",e.jsx(_,{size:16,className:"ml-2 group-hover:translate-x-1 transition-transform"})]})})]})}),!c&&b&&e.jsxs("div",{className:"space-y-4 pt-6 border-t border-white/10",children:[e.jsx("h4",{className:"text-lg font-semibold flex items-center gap-2 text-zinc-200",children:"Previous Queries"}),h.length===0?e.jsx("p",{className:"text-sm text-zinc-500 italic",children:"No previous queries found."}):e.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar",children:h.map(t=>e.jsxs(v,{className:"bg-black/40 space-y-3 border-white/5 hover:border-white/10 transition-colors group relative",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs text-zinc-500 pb-2 border-b border-white/5",children:[e.jsxs("span",{className:"font-mono text-lime-500/80",children:[t.updatedAt?"Updated ":"Sent "," ",C(t.updatedAt||t.createdAt)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(t),className:"p-1.5 hover:bg-white/10 rounded-md text-zinc-400 hover:text-white transition-colors",title:"Edit",children:e.jsx(L,{size:14})}),e.jsx("button",{onClick:()=>k(t.id),className:"p-1.5 hover:bg-red-500/10 rounded-md text-zinc-400 hover:text-red-400 transition-colors",title:"Delete",children:e.jsx(M,{size:14})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h5",{className:"text-sm font-semibold text-white truncate",children:t.projectType||"General Inquiry"}),e.jsx("p",{className:"text-sm text-zinc-400 line-clamp-2 leading-relaxed",title:t.message,children:t.message||"No description provided."})]}),e.jsx("div",{className:"pt-2 flex justify-between items-center",children:e.jsxs("div",{className:"text-xs text-zinc-500 truncate max-w-[70%]",children:[e.jsx("span",{className:"text-zinc-600",children:"Budget: "}),e.jsx("span",{className:"text-zinc-300 truncate",children:t.budget||"TBD"})]})})]},t.id))})]}),!c&&!b&&e.jsx("div",{className:"p-4 rounded-xl bg-white/5 border border-white/5 text-center mt-6",children:e.jsx("p",{className:"text-sm text-zinc-400",children:"Sign in to track and manage your project queries."})})]})]})};export{R as default};
